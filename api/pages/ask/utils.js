{"title":"","uid":"1cd19fc71517798e2fa5b7457d1fb06e","text":"const html5Attr = new Set(['href', 'class', 'placeholder', 'type', 'disabled', 'name', 'value', 'autocomplete']) const styles = new Set() fo...","date":"2022-10-27T08:49:34.295Z","updated":"2022-10-27T08:49:34.295Z","comments":true,"path":"api/pages/ask/utils.js","covers":null,"excerpt":"","content":"const html5Attr = new Set(['href', 'class', 'placeholder', 'type', 'disabled', 'name', 'value', 'autocomplete'])\nconst styles = new Set()\nfor (const attr in document.body) { html5Attr.add(attr) }\nfor (const style in document.body.style) { styles.add(style) }\n\nconst addChild = (where, child) => appendElement(where, ...Object.entries(child)[0])\n\nconst customTypes = (element, props) => ({\n  text: () => element.appendChild(document.createTextNode(props.text)),\n  child: () => addChild(element, props.child),\n  children: () => props.children.map(child => addChild(element, child))\n})\n\nconst setAttr = (element, props, name) => {\n  styles.has(name) && (element.style[name] = props[name])\n  html5Attr.has(name) && (name.startsWith('on') ? (element[name] = props[name]) : element.setAttribute(name, props[name]))\n}\n\nexport const appendElement = (where, elementName, props = {}) => {\n  const element = document.createElement(elementName)\n  where.appendChild(element)\n  for (const name in props) {\n    customTypes(element, props)[name]?.() ?? setAttr(element, props, name)\n  }\n\n  return element\n}\n\nexport const $ = id => document.querySelector(id)\n\nconst textToChars = text => text.split('').map(c => c.charCodeAt(0))\n\nconst applySaltToChar = (key, txt) => textToChars(key).reduce((a, b) => a ^ b, txt)\n\nexport const decrypt = (key, encrypted) => encrypted.match(/.{1,2}/g)\n  .map(hex => parseInt(hex, 16))\n  .map(txt => applySaltToChar(key, txt))\n  .map(charCode => String.fromCharCode(charCode))\n  .join('')\n\nexport const hash = str => textToChars(str).reduce((a, v) => a + ((a << 7) + (a << 3)) ^ v).toString(16)\n","count_time":{"symbolsCount":"1.6k","symbolsTime":"1 mins."},"toc":""}